<!DOCTYPE html>
<html>
	<head>
		<title>Ndn-Sci-Benchmark Chart</title>

		<style>
			html, body{
				width: 100%;
				height: 100%;
				margin: 0;
			}
		</style>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/dygraph/1.1.1/dygraph-combined.js"></script>
		<script>

			//skip the ? and get all the parameters.
			var params = window.location.search.substring(1).split('&').reduce(function(data, element){
				var a = element.split('=');
				data[a[0].toLowerCase()] = a[1];
				return data;
			}, {});

			var p1 = new Promise(function(resolve, reject){
				var ajax = new XMLHttpRequest();
				ajax.onreadystatechange = function(){
					if (ajax.readyState === 4 && ajax.status === 200){
						resolve(JSON.parse(ajax.responseText));
					} else {
						reject();
					}
				}
				ajax.open('GET', params['data']);
				ajax.send();
			});

			var p2 = new Promise(function(resolve, reject){
				document.addEventListener('load', resolve);
			});

			var p3 = Promise.all([p1, p2])
			.then(functcion(values){
				var data = values[0].data;

				switch ((params['type'] || '').toLowerCase()){
					case "names": 
						names(data.names);
						break;

					default:
					case "paths":
						paths(data.paths);
						break;
				}

			});

			function names(data){
				//TODO
			}

			function paths(data){
				//TODO
			}

		</script>
	</head>

	<body>
		<div id="chart"></div>	
	</body>
</html>

